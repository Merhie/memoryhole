Memory Hole Protected E-mail Headers
====================================

Encrypted or signed e-mail does not have cryptographic protection of
headers -- only the body of an e-mail message is encrypted or signed.

The Memory Hole project aims to fix this problem by stashing relevant
headers within the body of the e-mail in a standardized way.
Compatible mail user agents should be able to use this structure to
display the cryptographically protected headers to the user,
indicating their protection.

Messages composed using either PGP/MIME or S/MIME should be able to
use Memory Hole to add cryptographic protection for mail headers.

Things in this repository
-------------------------

corpus/ -- A collection of of e-mail messages that follow the Memory
           Hole standard.  Mail user agents interested in supporting
           this technique can use this corpus as a test vector to
           verify their implementations.

generators/ --  scripts to generate e-mails in the corpus. Each email
                in the corpus is generated by a single script in this
                directory.

inboxes/ -- Contains email inboxes in different formats, so that you
            can view the emails in the corpus directory using various
            Mail User Agents. This directory is generated when running
            `make`.

specs/ -- A draft standard of how to structure and interpret these
          messages.

guidance/ -- Documentation of guidance for implementors, including
             UI/UX, deployment, and configuration considerations

screenshots/ -- Screenshots of mail user agents rendering the corpus

history/ -- Documents showing early development and documentation of
            the project.




Alternatives Considered
-----------------------

### use the existing MIME headers in the top-most inner part

Concern: we cannot expect legacy OpenPGP-compatible clients to display
these headers during decryption, which means a Subject: line might get
lost.

Advantage: This is symmetric to the behavior of most MUAs
w.r.t. Content-Type: -- after decryption, they treat the message as
the embedded Content-Type, not the external Content-Type.

Advantage: there is no doubt about the position/placement of the
headers (you don't need to worry that there will be another
text/rfc822-header sub-part which causes ambiguity).

TODO: ensure that RFC3156 (and the equivalent RFC for S/MIME) doesn't
forbid this approach.

### wrap the whole message as an message/rfc822 sub-part

This is how S/MIME specifies protected headers should be done.
unfortunately, this is also how forwarded mail is represented, and
most MUAs present it as such (see alexey melnikov's proposed draft for
a marginal improvement).
